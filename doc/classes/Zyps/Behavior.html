<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE html 
     PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>Class: Zyps::Behavior</title>
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
  <meta http-equiv="Content-Script-Type" content="text/javascript" />
  <link rel="stylesheet" href="../.././rdoc-style.css" type="text/css" media="screen" />
  <script type="text/javascript">
  // <![CDATA[

  function popupCode( url ) {
    window.open(url, "Code", "resizable=yes,scrollbars=yes,toolbar=no,status=no,height=150,width=400")
  }

  function toggleCode( id ) {
    if ( document.getElementById )
      elem = document.getElementById( id );
    else if ( document.all )
      elem = eval( "document.all." + id );
    else
      return false;

    elemStyle = elem.style;
    
    if ( elemStyle.display != "block" ) {
      elemStyle.display = "block"
    } else {
      elemStyle.display = "none"
    }

    return true;
  }
  
  // Make codeblocks hidden by default
  document.writeln( "<style type=\"text/css\">div.method-source-code { display: none }</style>" )
  
  // ]]>
  </script>

</head>
<body>



    <div id="classHeader">
        <table class="header-table">
        <tr class="top-aligned-row">
          <td><strong>Class</strong></td>
          <td class="class-name-in-header">Zyps::Behavior</td>
        </tr>
        <tr class="top-aligned-row">
            <td><strong>In:</strong></td>
            <td>
                <a href="../../files/lib/zyps/serializer_rb.html">
                lib/zyps/serializer.rb
                </a>
        <br />
                <a href="../../files/lib/zyps_rb.html">
                lib/zyps.rb
                </a>
        <br />
            </td>
        </tr>

        <tr class="top-aligned-row">
            <td><strong>Parent:</strong></td>
            <td>
                Object
            </td>
        </tr>
        </table>
    </div>
  <!-- banner header -->

  <div id="bodyContent">



  <div id="contextContent">

    <div id="description">
      <p>
A behavior that a <a href="Creature.html">Creature</a> engages in. The
target can have its tags or colors changed, it can be &quot;herded&quot;,
it can be destroyed, or any other action the library user can dream up.
Likewise, the subject can change its own attributes, it can approach or
flee from the target, it can spawn <a href="Behavior.html#M000034">new</a>
Creatures or GameObjects (like bullets), or anything else.
</p>

    </div>


   </div>

    <div id="method-list">
      <h3 class="section-bar">Methods</h3>

      <div class="name-list">
      <a href="#M000049">&lt;&lt;</a>&nbsp;&nbsp;
      <a href="#M000048">==</a>&nbsp;&nbsp;
      <a href="#M000039">action_count</a>&nbsp;&nbsp;
      <a href="#M000037">actions</a>&nbsp;&nbsp;
      <a href="#M000035">add_action</a>&nbsp;&nbsp;
      <a href="#M000040">add_condition</a>&nbsp;&nbsp;
      <a href="#M000038">clear_actions</a>&nbsp;&nbsp;
      <a href="#M000043">clear_conditions</a>&nbsp;&nbsp;
      <a href="#M000044">condition_count</a>&nbsp;&nbsp;
      <a href="#M000045">condition_frequency=</a>&nbsp;&nbsp;
      <a href="#M000042">conditions</a>&nbsp;&nbsp;
      <a href="#M000046">copy</a>&nbsp;&nbsp;
      <a href="#M000034">new</a>&nbsp;&nbsp;
      <a href="#M000047">perform</a>&nbsp;&nbsp;
      <a href="#M000036">remove_action</a>&nbsp;&nbsp;
      <a href="#M000041">remove_condition</a>&nbsp;&nbsp;
      <a href="#M000050">to_s</a>&nbsp;&nbsp;
      <a href="#M000033">to_yaml_properties</a>&nbsp;&nbsp;
      </div>
    </div>

  </div>


    <!-- if includes -->

    <div id="section">





    <div id="attribute-list">
      <h3 class="section-bar">Attributes</h3>

      <div class="name-list">
        <table>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">actions</td>
          <td class="context-item-value">&nbsp;[RW]&nbsp;</td>
          <td class="context-item-desc">
An array of <a href="Action.html">Action</a> subclasses. <a
href="Action.html#M000054">Action#start</a>(actor, targets) and
action.do(actor, targets) will be called on each when all <a
href="Behavior.html#M000042">conditions</a> are true. <a
href="Action.html#M000056">Action#stop</a>(actor, targets) will be called
when any condition is false.

</td>
        </tr>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">condition_frequency</td>
          <td class="context-item-value">&nbsp;[RW]&nbsp;</td>
          <td class="context-item-desc">
Number of updates before behavior is allowed to select a <a
href="Behavior.html#M000034">new</a> group of targets to act on.

</td>
        </tr>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">conditions</td>
          <td class="context-item-value">&nbsp;[RW]&nbsp;</td>
          <td class="context-item-desc">
An array of <a href="Condition.html">Condition</a> subclasses. <a
href="Condition.html#M000266">Condition#select</a>(actor, targets) will be
called on each.

</td>
        </tr>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">creature</td>
          <td class="context-item-value">&nbsp;[RW]&nbsp;</td>
          <td class="context-item-desc">
The <a href="Creature.html">Creature</a> this behavior belongs to.

</td>
        </tr>
        </table>
      </div>
    </div>
      


    <!-- if method_list -->
    <div id="methods">
      <h3 class="section-bar">Public Class methods</h3>

      <div id="method-M000034" class="method-detail">
        <a name="M000034"></a>

        <div class="method-heading">
          <a href="#M000034" class="method-signature">
          <span class="method-name">new</span><span class="method-args">(options = {})</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Takes a hash with these keys and defaults:
</p>
<pre>
      :actions =&gt; []
      :conditions =&gt; []
      :condition_frequency =&gt; 1
</pre>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000034-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000034-source">
<pre>
<span class="ruby-comment cmt"># File lib/zyps.rb, line 496</span>
        <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">initialize</span> (<span class="ruby-identifier">options</span> = {})
                <span class="ruby-identifier">options</span> = {
                        <span class="ruby-identifier">:actions</span> =<span class="ruby-operator">&gt;</span> [],
                        <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> [],
                        <span class="ruby-identifier">:condition_frequency</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">1</span>
                }.<span class="ruby-identifier">merge</span>(<span class="ruby-identifier">options</span>)
                <span class="ruby-ivar">@actions</span> = []
                <span class="ruby-ivar">@conditions</span> = []
                <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:actions</span>].<span class="ruby-identifier">each</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">action</span><span class="ruby-operator">|</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">add_action</span>(<span class="ruby-identifier">action</span>)}
                <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:conditions</span>].<span class="ruby-identifier">each</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">condition</span><span class="ruby-operator">|</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">add_condition</span>(<span class="ruby-identifier">condition</span>)}
                <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">condition_frequency</span> = <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:condition_frequency</span>]
                <span class="ruby-comment cmt">#Tracks number of calls to perform() so conditions can be evaluated with appropriate frequency.</span>
                <span class="ruby-ivar">@condition_evaluation_count</span> = <span class="ruby-value">0</span>
                <span class="ruby-comment cmt">#Targets currently selected to act upon.</span>
                <span class="ruby-ivar">@current_targets</span> = []
        <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <h3 class="section-bar">Public Instance methods</h3>

      <div id="method-M000049" class="method-detail">
        <a name="M000049"></a>

        <div class="method-heading">
          <a href="#M000049" class="method-signature">
          <span class="method-name">&lt;&lt;</span><span class="method-args">(item)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Overloads the &lt;&lt; operator to put the <a
href="Behavior.html#M000034">new</a> item into the correct list or assign
it to the correct attribute. Assignment is done based on item&#8216;s class
or a parent class of item.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000049-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000049-source">
<pre>
<span class="ruby-comment cmt"># File lib/zyps.rb, line 611</span>
        <span class="ruby-keyword kw">def</span> <span class="ruby-operator">&lt;&lt;</span>(<span class="ruby-identifier">item</span>)
                <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">item</span>.<span class="ruby-identifier">kind_of?</span> <span class="ruby-constant">Condition</span>
                        <span class="ruby-identifier">add_condition</span>(<span class="ruby-identifier">item</span>)
                <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">item</span>.<span class="ruby-identifier">kind_of?</span> <span class="ruby-constant">Action</span>
                        <span class="ruby-identifier">add_action</span>(<span class="ruby-identifier">item</span>)
                <span class="ruby-keyword kw">else</span>
                        <span class="ruby-identifier">raise</span> <span class="ruby-node">&quot;Invalid item: #{item.class}&quot;</span>
                <span class="ruby-keyword kw">end</span>
                <span class="ruby-keyword kw">self</span>
        <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000048" class="method-detail">
        <a name="M000048"></a>

        <div class="method-heading">
          <a href="#M000048" class="method-signature">
          <span class="method-name">==</span><span class="method-args">(other)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
True if all attributes, <a href="Behavior.html#M000037">actions</a> and <a
href="Behavior.html#M000042">conditions</a> are the same.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000048-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000048-source">
<pre>
<span class="ruby-comment cmt"># File lib/zyps.rb, line 600</span>
        <span class="ruby-keyword kw">def</span> <span class="ruby-operator">==</span>(<span class="ruby-identifier">other</span>)
                <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">false</span> <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@actions</span> <span class="ruby-operator">!=</span> <span class="ruby-identifier">other</span>.<span class="ruby-identifier">actions</span>.<span class="ruby-identifier">to_a</span>
                <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">false</span> <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@conditions</span> <span class="ruby-operator">!=</span> <span class="ruby-identifier">other</span>.<span class="ruby-identifier">conditions</span>.<span class="ruby-identifier">to_a</span>
                <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">false</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">condition_frequency</span> <span class="ruby-operator">!=</span> <span class="ruby-identifier">other</span>.<span class="ruby-identifier">condition_frequency</span>
                <span class="ruby-keyword kw">true</span>
        <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000039" class="method-detail">
        <a name="M000039"></a>

        <div class="method-heading">
          <a href="#M000039" class="method-signature">
          <span class="method-name">action_count</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Number of Actions.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000039-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000039-source">
<pre>
<span class="ruby-comment cmt"># File lib/zyps.rb, line 531</span>
        <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">action_count</span>; <span class="ruby-ivar">@actions</span>.<span class="ruby-identifier">length</span>; <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000037" class="method-detail">
        <a name="M000037"></a>

        <div class="method-heading">
          <a href="#M000037" class="method-signature">
          <span class="method-name">actions</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
An Enumerable::Enumerator over each <a href="Action.html">Action</a>.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000037-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000037-source">
<pre>
<span class="ruby-comment cmt"># File lib/zyps.rb, line 525</span>
        <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">actions</span>; <span class="ruby-constant">Enumerable</span><span class="ruby-operator">::</span><span class="ruby-constant">Enumerator</span>.<span class="ruby-identifier">new</span>(<span class="ruby-ivar">@actions</span>, <span class="ruby-identifier">:each</span>); <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000035" class="method-detail">
        <a name="M000035"></a>

        <div class="method-heading">
          <a href="#M000035" class="method-signature">
          <span class="method-name">add_action</span><span class="method-args">(action)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Add an <a href="Action.html">Action</a> to this behavior.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000035-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000035-source">
<pre>
<span class="ruby-comment cmt"># File lib/zyps.rb, line 515</span>
        <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">add_action</span>(<span class="ruby-identifier">action</span>)
                <span class="ruby-identifier">action</span>.<span class="ruby-identifier">behavior</span> = <span class="ruby-keyword kw">self</span>
                <span class="ruby-ivar">@actions</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">action</span>
        <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000040" class="method-detail">
        <a name="M000040"></a>

        <div class="method-heading">
          <a href="#M000040" class="method-signature">
          <span class="method-name">add_condition</span><span class="method-args">(condition)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Add a <a href="Condition.html">Condition</a> to this behavior.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000040-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000040-source">
<pre>
<span class="ruby-comment cmt"># File lib/zyps.rb, line 535</span>
        <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">add_condition</span>(<span class="ruby-identifier">condition</span>)
                <span class="ruby-identifier">condition</span>.<span class="ruby-identifier">behavior</span> = <span class="ruby-keyword kw">self</span>
                <span class="ruby-ivar">@conditions</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">condition</span>
        <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000038" class="method-detail">
        <a name="M000038"></a>

        <div class="method-heading">
          <a href="#M000038" class="method-signature">
          <span class="method-name">clear_actions</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Remove all Actions from this behavior.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000038-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000038-source">
<pre>
<span class="ruby-comment cmt"># File lib/zyps.rb, line 527</span>
        <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">clear_actions</span>
                <span class="ruby-ivar">@actions</span>.<span class="ruby-identifier">clone</span>.<span class="ruby-identifier">each</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">action</span><span class="ruby-operator">|</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">remove_action</span>(<span class="ruby-identifier">action</span>)}
        <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000043" class="method-detail">
        <a name="M000043"></a>

        <div class="method-heading">
          <a href="#M000043" class="method-signature">
          <span class="method-name">clear_conditions</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Remove all Conditions from this behavior.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000043-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000043-source">
<pre>
<span class="ruby-comment cmt"># File lib/zyps.rb, line 547</span>
        <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">clear_conditions</span>
                <span class="ruby-ivar">@conditions</span>.<span class="ruby-identifier">clone</span>.<span class="ruby-identifier">each</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">condition</span><span class="ruby-operator">|</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">remove_condition</span>(<span class="ruby-identifier">condition</span>)}
        <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000044" class="method-detail">
        <a name="M000044"></a>

        <div class="method-heading">
          <a href="#M000044" class="method-signature">
          <span class="method-name">condition_count</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Number of Conditions.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000044-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000044-source">
<pre>
<span class="ruby-comment cmt"># File lib/zyps.rb, line 551</span>
        <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">condition_count</span>; <span class="ruby-ivar">@conditions</span>.<span class="ruby-identifier">length</span>; <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000045" class="method-detail">
        <a name="M000045"></a>

        <div class="method-heading">
          <a href="#M000045" class="method-signature">
          <span class="method-name">condition_frequency=</span><span class="method-args">(value)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000045-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000045-source">
<pre>
<span class="ruby-comment cmt"># File lib/zyps.rb, line 554</span>
        <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">condition_frequency=</span> (<span class="ruby-identifier">value</span>)
                <span class="ruby-comment cmt">#Condition frequency must be 1 or more.</span>
                <span class="ruby-ivar">@condition_frequency</span> = (<span class="ruby-identifier">value</span> <span class="ruby-operator">&gt;=</span> <span class="ruby-value">1</span> <span class="ruby-operator">?</span> <span class="ruby-identifier">value</span> <span class="ruby-operator">:</span> <span class="ruby-value">1</span>)
                <span class="ruby-comment cmt">#This will be used to distribute condition evaluation time among all behaviors with this frequency.</span>
                <span class="ruby-ivar">@condition_order</span> = <span class="ruby-ivar">@@condition_order</span>[<span class="ruby-ivar">@condition_frequency</span>]
                <span class="ruby-ivar">@@condition_order</span>[<span class="ruby-ivar">@condition_frequency</span>] <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
        <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000042" class="method-detail">
        <a name="M000042"></a>

        <div class="method-heading">
          <a href="#M000042" class="method-signature">
          <span class="method-name">conditions</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
An Enumerable::Enumerator over each <a href="Condition.html">Condition</a>.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000042-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000042-source">
<pre>
<span class="ruby-comment cmt"># File lib/zyps.rb, line 545</span>
        <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">conditions</span>; <span class="ruby-constant">Enumerable</span><span class="ruby-operator">::</span><span class="ruby-constant">Enumerator</span>.<span class="ruby-identifier">new</span>(<span class="ruby-ivar">@conditions</span>, <span class="ruby-identifier">:each</span>); <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000046" class="method-detail">
        <a name="M000046"></a>

        <div class="method-heading">
          <a href="#M000046" class="method-signature">
          <span class="method-name">copy</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Make a deep <a href="Behavior.html#M000046">copy</a>.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000046-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000046-source">
<pre>
<span class="ruby-comment cmt"># File lib/zyps.rb, line 564</span>
        <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">copy</span>
                <span class="ruby-identifier">copy</span> = <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">clone</span> <span class="ruby-comment cmt">#Currently, we overwrite everything anyway, but we may add some clonable attributes later.</span>
                <span class="ruby-comment cmt">#Make a deep copy of all actions.</span>
                <span class="ruby-identifier">copy</span>.<span class="ruby-identifier">instance_eval</span> {<span class="ruby-ivar">@actions</span> = []}
                <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">actions</span>.<span class="ruby-identifier">each</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">action</span><span class="ruby-operator">|</span> <span class="ruby-identifier">copy</span>.<span class="ruby-identifier">add_action</span>(<span class="ruby-identifier">action</span>.<span class="ruby-identifier">copy</span>)}
                <span class="ruby-comment cmt">#Make a deep copy of all conditions.</span>
                <span class="ruby-identifier">copy</span>.<span class="ruby-identifier">instance_eval</span> {<span class="ruby-ivar">@conditions</span> = []}
                <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">conditions</span>.<span class="ruby-identifier">each</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">condition</span><span class="ruby-operator">|</span> <span class="ruby-identifier">copy</span>.<span class="ruby-identifier">add_condition</span>(<span class="ruby-identifier">condition</span>.<span class="ruby-identifier">copy</span>)}
                <span class="ruby-identifier">copy</span>
        <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000047" class="method-detail">
        <a name="M000047"></a>

        <div class="method-heading">
          <a href="#M000047" class="method-signature">
          <span class="method-name">perform</span><span class="method-args">(actor, targets)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Finds targets that meet all <a href="Behavior.html#M000042">conditions</a>,
then acts on them. Calls select(actor, targets) on each <a
href="Condition.html">Condition</a>, each time discarding targets that
fail. Then on each <a href="Action.html">Action</a>, calls <a
href="Action.html#M000054">Action#start</a>(actor, targets) (if not already
started) followed by <a href="Action.html#M000055">Action#do</a>(actor,
targets). If no matching targets are found, calls <a
href="Action.html#M000056">Action#stop</a>(actor, targets) on each <a
href="Action.html">Action</a>. If there are no <a
href="Behavior.html#M000042">conditions</a>, <a
href="Behavior.html#M000037">actions</a> will occur regardless of targets.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000047-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000047-source">
<pre>
<span class="ruby-comment cmt"># File lib/zyps.rb, line 581</span>
        <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">perform</span>(<span class="ruby-identifier">actor</span>, <span class="ruby-identifier">targets</span>)
                
                <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">condition_evaluation_turn?</span>
                        <span class="ruby-ivar">@current_targets</span> = <span class="ruby-identifier">targets</span>.<span class="ruby-identifier">clone</span>
                        <span class="ruby-identifier">conditions</span>.<span class="ruby-identifier">each</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">condition</span><span class="ruby-operator">|</span> <span class="ruby-ivar">@current_targets</span> = <span class="ruby-identifier">condition</span>.<span class="ruby-identifier">select</span>(<span class="ruby-identifier">actor</span>, <span class="ruby-ivar">@current_targets</span>)}
                <span class="ruby-keyword kw">end</span>
                <span class="ruby-identifier">actions</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">action</span><span class="ruby-operator">|</span>
                        <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@current_targets</span>.<span class="ruby-identifier">empty?</span> <span class="ruby-keyword kw">and</span> <span class="ruby-operator">!</span> <span class="ruby-ivar">@conditions</span>.<span class="ruby-identifier">empty?</span>
                                <span class="ruby-identifier">action</span>.<span class="ruby-identifier">stop</span>(<span class="ruby-identifier">actor</span>, <span class="ruby-identifier">targets</span>) <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">action</span>.<span class="ruby-identifier">started?</span> <span class="ruby-comment cmt">#Not @current_targets; that array is empty.</span>
                        <span class="ruby-keyword kw">else</span>
                                <span class="ruby-identifier">action</span>.<span class="ruby-identifier">start</span>(<span class="ruby-identifier">actor</span>, <span class="ruby-ivar">@current_targets</span>) <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">action</span>.<span class="ruby-identifier">started?</span>
                                <span class="ruby-identifier">action</span>.<span class="ruby-identifier">do</span>(<span class="ruby-identifier">actor</span>, <span class="ruby-ivar">@current_targets</span>)
                        <span class="ruby-keyword kw">end</span>
                <span class="ruby-keyword kw">end</span>
                
        <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000036" class="method-detail">
        <a name="M000036"></a>

        <div class="method-heading">
          <a href="#M000036" class="method-signature">
          <span class="method-name">remove_action</span><span class="method-args">(action)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Remove an <a href="Action.html">Action</a> from this behavior.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000036-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000036-source">
<pre>
<span class="ruby-comment cmt"># File lib/zyps.rb, line 520</span>
        <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">remove_action</span>(<span class="ruby-identifier">action</span>)
                <span class="ruby-identifier">action</span>.<span class="ruby-identifier">behavior</span> = <span class="ruby-keyword kw">nil</span>
                <span class="ruby-ivar">@actions</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-identifier">action</span>)
        <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000041" class="method-detail">
        <a name="M000041"></a>

        <div class="method-heading">
          <a href="#M000041" class="method-signature">
          <span class="method-name">remove_condition</span><span class="method-args">(condition)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Remove a <a href="Condition.html">Condition</a> from this behavior.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000041-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000041-source">
<pre>
<span class="ruby-comment cmt"># File lib/zyps.rb, line 540</span>
        <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">remove_condition</span>(<span class="ruby-identifier">condition</span>)
                <span class="ruby-identifier">condition</span>.<span class="ruby-identifier">behavior</span> = <span class="ruby-keyword kw">nil</span>
                <span class="ruby-ivar">@conditions</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-identifier">condition</span>)
        <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000050" class="method-detail">
        <a name="M000050"></a>

        <div class="method-heading">
          <a href="#M000050" class="method-signature">
          <span class="method-name">to_s</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000050-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000050-source">
<pre>
<span class="ruby-comment cmt"># File lib/zyps.rb, line 623</span>
        <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">to_s</span>
                [
                        (<span class="ruby-ivar">@actions</span> <span class="ruby-operator">+</span> <span class="ruby-ivar">@conditions</span>).<span class="ruby-identifier">map</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">o</span><span class="ruby-operator">|</span> <span class="ruby-identifier">o</span>.<span class="ruby-identifier">class</span>}.<span class="ruby-identifier">join</span>(<span class="ruby-value str">&quot;, &quot;</span>),
                        <span class="ruby-node">&quot;[#{@current_targets.map{|o| o.name || sprintf(&quot;%07X&quot;, o.identifier)}.join(',')}]&quot;</span>
                ].<span class="ruby-identifier">join</span>(<span class="ruby-value str">&quot; &quot;</span>)
        <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000033" class="method-detail">
        <a name="M000033"></a>

        <div class="method-heading">
          <a href="#M000033" class="method-signature">
          <span class="method-name">to_yaml_properties</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000033-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000033-source">
<pre>
<span class="ruby-comment cmt"># File lib/zyps/serializer.rb, line 36</span>
        <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">to_yaml_properties</span>
                <span class="ruby-identifier">instance_variables</span>.<span class="ruby-identifier">reject</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">v</span><span class="ruby-operator">|</span> <span class="ruby-identifier">v</span> <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;@creature&quot;</span> <span class="ruby-keyword kw">or</span> <span class="ruby-identifier">v</span> <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;@current_targets&quot;</span>}
        <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>


    </div>


  </div>


<div id="validator-badges">
  <p><small><a href="http://validator.w3.org/check/referer">[Validate]</a></small></p>
</div>

</body>
</html>