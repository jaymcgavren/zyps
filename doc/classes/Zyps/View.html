<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE html 
     PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>Class: Zyps::View</title>
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
  <meta http-equiv="Content-Script-Type" content="text/javascript" />
  <link rel="stylesheet" href="../.././rdoc-style.css" type="text/css" media="screen" />
  <script type="text/javascript">
  // <![CDATA[

  function popupCode( url ) {
    window.open(url, "Code", "resizable=yes,scrollbars=yes,toolbar=no,status=no,height=150,width=400")
  }

  function toggleCode( id ) {
    if ( document.getElementById )
      elem = document.getElementById( id );
    else if ( document.all )
      elem = eval( "document.all." + id );
    else
      return false;

    elemStyle = elem.style;
    
    if ( elemStyle.display != "block" ) {
      elemStyle.display = "block"
    } else {
      elemStyle.display = "none"
    }

    return true;
  }
  
  // Make codeblocks hidden by default
  document.writeln( "<style type=\"text/css\">div.method-source-code { display: none }</style>" )
  
  // ]]>
  </script>

</head>
<body>



    <div id="classHeader">
        <table class="header-table">
        <tr class="top-aligned-row">
          <td><strong>Class</strong></td>
          <td class="class-name-in-header">Zyps::View</td>
        </tr>
        <tr class="top-aligned-row">
            <td><strong>In:</strong></td>
            <td>
                <a href="../../files/lib/zyps/views_rb.html">
                lib/zyps/views.rb
                </a>
        <br />
            </td>
        </tr>

        <tr class="top-aligned-row">
            <td><strong>Parent:</strong></td>
            <td>
                Object
            </td>
        </tr>
        </table>
    </div>
  <!-- banner header -->

  <div id="bodyContent">



  <div id="contextContent">

    <div id="description">
      <p>
Base class of views in <a href="../Zyps.html">Zyps</a>.
</p>

    </div>


   </div>

    <div id="method-list">
      <h3 class="section-bar">Methods</h3>

      <div class="name-list">
      <a href="#M000262">draw_line</a>&nbsp;&nbsp;
      <a href="#M000261">draw_rectangle</a>&nbsp;&nbsp;
      <a href="#M000260">new</a>&nbsp;&nbsp;
      <a href="#M000263">update</a>&nbsp;&nbsp;
      </div>
    </div>

  </div>


    <!-- if includes -->

    <div id="section">





    <div id="attribute-list">
      <h3 class="section-bar">Attributes</h3>

      <div class="name-list">
        <table>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">background_color</td>
          <td class="context-item-value">&nbsp;[RW]&nbsp;</td>
          <td class="context-item-desc">
<a href="Color.html">Color</a> that background should be drawn with.

</td>
        </tr>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">canvas</td>
          <td class="context-item-value">&nbsp;[RW]&nbsp;</td>
          <td class="context-item-desc">
A GUI toolkit-specific drawing area that will be used to render the view.
See <a href="WxCanvas.html">WxCanvas</a> and GTK2Canvas.

</td>
        </tr>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">erase_flag</td>
          <td class="context-item-value">&nbsp;[RW]&nbsp;</td>
          <td class="context-item-desc">
Whether view should be erased before re-drawing.

</td>
        </tr>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">origin</td>
          <td class="context-item-value">&nbsp;[RW]&nbsp;</td>
          <td class="context-item-desc">
A <a href="Location.html">Location</a> which objects will be drawn relative
to.

</td>
        </tr>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">scale</td>
          <td class="context-item-value">&nbsp;[RW]&nbsp;</td>
          <td class="context-item-desc">
Scale of the view, with 1.0 being actual size.

</td>
        </tr>
        </table>
      </div>
    </div>
      


    <!-- if method_list -->
    <div id="methods">
      <h3 class="section-bar">Public Class methods</h3>

      <div id="method-M000260" class="method-detail">
        <a name="M000260"></a>

        <div class="method-heading">
          <a href="#M000260" class="method-signature">
          <span class="method-name">new</span><span class="method-args">(options = {})</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Takes a hash with these keys and defaults:
</p>
<pre>
      :canvas =&gt; nil,
      :scale =&gt; 1,
      :origin =&gt; Location.new(0.0),
      :erase_flag =&gt; true,
      :background_color =&gt; Color.black
</pre>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000260-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000260-source">
<pre>
<span class="ruby-comment cmt"># File lib/zyps/views.rb, line 48</span>
        <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">initialize</span>(<span class="ruby-identifier">options</span> = {})
        
                <span class="ruby-identifier">options</span> = {
                        <span class="ruby-identifier">:canvas</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">nil</span>,
                        <span class="ruby-identifier">:scale</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">1</span>,
                        <span class="ruby-identifier">:origin</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-constant">Location</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value">0</span>, <span class="ruby-value">0</span>),
                        <span class="ruby-identifier">:erase_flag</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>,
                        <span class="ruby-identifier">:background_color</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-constant">Color</span>.<span class="ruby-identifier">black</span>
                }.<span class="ruby-identifier">merge</span>(<span class="ruby-identifier">options</span>)
                <span class="ruby-ivar">@canvas</span> = <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:canvas</span>]
                <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">scale</span> = <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:scale</span>]
                <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">origin</span> = <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:origin</span>]
                <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">erase_flag</span> = <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:erase_flag</span>]
                
        <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <h3 class="section-bar">Public Instance methods</h3>

      <div id="method-M000262" class="method-detail">
        <a name="M000262"></a>

        <div class="method-heading">
          <a href="#M000262" class="method-signature">
          <span class="method-name">draw_line</span><span class="method-args">(options = {})</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Draw a line to the canvas, compensating for origin and scale. Takes a hash
with these keys and defaults:
</p>
<pre>
      :color =&gt; nil
      :width =&gt; nil
      :location_1 =&gt; nil
      :location_2 =&gt; nil
</pre>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000262-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000262-source">
<pre>
<span class="ruby-comment cmt"># File lib/zyps/views.rb, line 97</span>
        <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">draw_line</span>(<span class="ruby-identifier">options</span> = {})
                <span class="ruby-identifier">x1</span>, <span class="ruby-identifier">y1</span> = <span class="ruby-identifier">drawing_coordinates</span>(<span class="ruby-identifier">options</span>[<span class="ruby-identifier">:location_1</span>])
                <span class="ruby-identifier">x2</span>, <span class="ruby-identifier">y2</span> = <span class="ruby-identifier">drawing_coordinates</span>(<span class="ruby-identifier">options</span>[<span class="ruby-identifier">:location_2</span>])
                <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">canvas</span>.<span class="ruby-identifier">draw_line</span>(
                        <span class="ruby-identifier">:x1</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">x1</span>,
                        <span class="ruby-identifier">:y1</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">y1</span>,
                        <span class="ruby-identifier">:x2</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">x2</span>,
                        <span class="ruby-identifier">:y2</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">y2</span>,
                        <span class="ruby-identifier">:width</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">drawing_scale</span>(<span class="ruby-identifier">options</span>[<span class="ruby-identifier">:width</span>]),
                        <span class="ruby-identifier">:color</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:color</span>]
                )
        <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000261" class="method-detail">
        <a name="M000261"></a>

        <div class="method-heading">
          <a href="#M000261" class="method-signature">
          <span class="method-name">draw_rectangle</span><span class="method-args">(options = {})</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Draw a rectangle to the canvas, compensating for origin and scale. Takes a
hash with these keys and defaults:
</p>
<pre>
      :color =&gt; nil
      :border_width =&gt; 1
      :filled =&gt; true
      :location =&gt; nil
      :width =&gt; nil
      :height =&gt; nil
</pre>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000261-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000261-source">
<pre>
<span class="ruby-comment cmt"># File lib/zyps/views.rb, line 73</span>
        <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">draw_rectangle</span>(<span class="ruby-identifier">options</span> = {})
                <span class="ruby-identifier">options</span> = {
                        <span class="ruby-identifier">:filled</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>,
                        <span class="ruby-identifier">:border_width</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">1</span>
                }.<span class="ruby-identifier">merge</span>(<span class="ruby-identifier">options</span>)
                <span class="ruby-identifier">x</span>, <span class="ruby-identifier">y</span> = <span class="ruby-identifier">drawing_coordinates</span>(<span class="ruby-identifier">options</span>[<span class="ruby-identifier">:location</span>])
                <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">canvas</span>.<span class="ruby-identifier">draw_rectangle</span>(
                        <span class="ruby-identifier">:x</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">x</span>,
                        <span class="ruby-identifier">:y</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">y</span>,
                        <span class="ruby-identifier">:width</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">drawing_scale</span>(<span class="ruby-identifier">options</span>[<span class="ruby-identifier">:width</span>]),
                        <span class="ruby-identifier">:height</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">drawing_scale</span>(<span class="ruby-identifier">options</span>[<span class="ruby-identifier">:height</span>]),
                        <span class="ruby-identifier">:border_width</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">drawing_scale</span>(<span class="ruby-identifier">options</span>[<span class="ruby-identifier">:border_width</span>]),
                        <span class="ruby-identifier">:filled</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:filled</span>],
                        <span class="ruby-identifier">:color</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:color</span>]
                )
        <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000263" class="method-detail">
        <a name="M000263"></a>

        <div class="method-heading">
          <a href="#M000263" class="method-signature">
          <span class="method-name">update</span><span class="method-args">(environment) {|object| ...}</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Base <a href="View.html#M000263">update</a> method to be overridden in
subclass. This method clears the canvas in preparation of drawing to the
canvas. It then iterates over each object in the environment and yields the
object. This allows the child class to <a
href="View.html#M000263">update</a> each object in its own specific manner,
</p>
<pre>
 by calling super and passing a block that performs the actual update
</pre>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000263-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000263-source">
<pre>
<span class="ruby-comment cmt"># File lib/zyps/views.rb, line 116</span>
        <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">update</span>(<span class="ruby-identifier">environment</span>)
        
                <span class="ruby-identifier">clear_view</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">erase_flag</span>
                
                <span class="ruby-comment cmt">#For each GameObject in the environment:</span>
                <span class="ruby-comment cmt">#yields this object to the calling block</span>
                <span class="ruby-identifier">environment</span>.<span class="ruby-identifier">objects</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">object</span><span class="ruby-operator">|</span>
                        <span class="ruby-keyword kw">yield</span> <span class="ruby-identifier">object</span>
                <span class="ruby-keyword kw">end</span> <span class="ruby-comment cmt">#environment.objects.each</span>
                <span class="ruby-comment cmt">#render the canvas</span>
                <span class="ruby-ivar">@canvas</span>.<span class="ruby-identifier">render</span>
                
        <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>


    </div>


  </div>


<div id="validator-badges">
  <p><small><a href="http://validator.w3.org/check/referer">[Validate]</a></small></p>
</div>

</body>
</html>